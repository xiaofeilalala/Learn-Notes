# JavaScript 运算符



## 1. 运算符概念

* **表达式：**由数字、运算符、变量等以能求得数值的有意义的排列方法所得的组合（由数字、变量、运算符组成的式子）
* **返回值：**表达式最终都会有一个结果,这个结果最终会返回给使用者,这种形式叫返回值
* **运算元：**运算符应用的对象，也称为了参数（比如说乘法运算 `5 * 2`，有两个运算元：左运算元 `5` 和右运算元 `2`）
* **一元运算符：**一个运算符对应的只有一个运算元（`-x`）
* **二元运算符：**一个运算符拥有两个运算元（`x - y`）

![](https://raw.githubusercontent.com/xiaofeilalala/DocsPics/main/imgs/20211230172024.png)



## 2. 算数运算符

算数运算符使用数值（字面量或者变量）作为操作数并返回一个数值，标准的算术运算符就是加减乘除（`+`、`-`、`*`、`/`）

* `%` 取余 `a % b` 的结果是 `a` 整除 `b` 的 余数
* `**` 求幂 求幂运算 `a ** b` 将 `a` 提升至 `a` 的 `b` 次幂。在数学中我们将其表示为 a^b，也适用于非整数

| 运算符 | 描述 |
| ------ | ---- |
| `+`    | 加法 |
| `-`    | 减法 |
| `*`    | 乘法 |
| `/`    | 除法 |
| `%`    | 取余 |
| `**`   | 求幂 |

```js
// 算术运算符
// + 加法、- 减法、* 乘法、/ 除法、% 取余、** 求幂
let a = 6;
let b = 4;
console.log(a + b); // a加b
console.log(a - b); // a减b
console.log(a * b); // a乘b
console.log(a / b); // a除b
console.log(a % b); // a除b的余数
console.log(a ** b); // a的b次幂
```

> **Tips：**
>
> * 浮点的精度一般最高精度到17位小数，进行计算时浮点型数据的精度远远不如整数类型的数据
> * 在判断两个数是否相等时，千万不要用浮点型进行比较



## 3. 字符串运算符

* 二元运算符 `+` 连接字符串 

  * 在二元运算符中只要任意一个运算元是字符串，那么另一个运算元也将被转化为字符串

  * 二元 `+` 是唯一一个以这种方式支持字符串的运算符。其他算术运算符只对数字起作用，并且总是将其运算元转换为数字

* 一元运算符 `+` 类型转换为数字类型（一元运算符中如果运算元不是数字，加号 + 则会将其转化为数字）

```js
// 加号的扩展
// 在二元运算符中只要任意一个运算元是字符串，那么另一个运算元也将被转化为字符串
console.log(1 + '2', typeof(1 + '2')); // '12' string

// 其他算术运算符只对数字起作用，并且总是将其运算元转换为数字
console.log('3' - 1); // 2
console.log('2' * '3'); // 6
console.log('8' / 4 ); // 2

// 一元运算符中如果运算元不是数字，加号 + 则会将其转化为数字
console.log(+'3'); // 3
console.log(+true); // 1
```



## 4. 递增和递减

对一个数进行加一、减一可以使用递增 `++` 和递减 `--` 运算符来完成

在 javascript 中，递增 `++` 和递减 `--` 运算符既可以放在变量前面，也可以放在变量后面。放在变量前面时，被称为前置递增/前置递减；放在变量后面时，被称为后置递增/后置递减

> **Tips：**递增递减运算符必须和变量配合使用

* **自增** `++` 将变量与 1 相加
* **自减** `--` 将变量与 1 相减



**如果自增/自减的值不会被使用，那么两者形式没有区别**

```js
let num = 1;
counter++;
++counter;
console.log( counter ); // 2，以上两行作用相同
```



### 4-1 前置递增/递减

**前置递增/递减就是先自身计算，再赋值给变量**

如果我们想要对变量进行自增操作，并且需要立刻使用自增后的值，那么我们需要使用前置形式：

```js
let num = 1;
console.log(++num); // 2
```



### 4-2 后置递增/递减

**后置型递增/递减是先将自身的值赋值给变量，然后再自增/自减1**

如果我们想要将一个数加一，但是我们想使用其自增之前的值，那么我们需要使用后置形式：

```js
let num = 1;
console.log(num++); // 1
```



## 5. 比较运算符

比较运算符（关系运算符）是两个数据进行比较时所使用的运算符，比较运算后会返回布尔类型值（true / false）作为比较运算的结果

| 运算符 | 描述           |
| :----- | :------------- |
| ==     | 等于           |
| ===    | 等值等型       |
| !=     | 不相等         |
| !==    | 不等值或不等型 |
| >      | 大于           |
| <      | 小于           |
| >=     | 大于或等于     |
| <=     | 小于或等于     |
| ?      | 三元运算符     |



### 5-1 字符串比较

在比较字符串的大小时，JavaScript 会使用Unicode 编码顺序，按字符（母）逐个进行比较的

* 首先比较两个字符串的首位字符大小
* 如果一方字符较大（或较小），则该字符串大于（或小于）另一个字符串。算法结束
* 否则，如果两个字符串的首位字符相等，则继续取出两个字符串各自的后一位字符进行比较
* 重复上述步骤进行比较，直到比较完成某字符串的所有字符为止
* 如果两个字符串的字符同时用完，那么则判定它们相等，否则未结束（还有未比较的字符）的字符串更大

```js
console.log('A' > 'a'); // false
console.log('name' < 'names'); // true
console.log('aaa' > 'AA'); // true

console.log('jsx' == 'jsx'); // true
console.log('jsx' === 'jsx'); // true
```



### 5-2 不同类型比较

当对不同类型的值进行比较时，处于比较运算符两侧的值会先被转化为数字再进行比较

> **Tips：**在严格相等 `===`  或严格不相等 `!==` 在进行比较时不会做任何的类型转换

```js
console.log('5' > 3); // true
console.log(true == 1); // true
console.log(4 > 6); // false
console.log(1 >= '1'); // true
console.log(2 <= false); // false
console.log(null >= 0); // true
```



### 5-3 普通相等和严格相等

* 普通相等运算符 `==` 在进行比较时会做隐式转换，会先被转化为数字再进行比较

* 在严格相等 `===`  或严格不相等 `!==` 在进行比较时不会做任何的类型转换

* 在普通相等 `==` 下，`null` 和 `undefined` 相等且各自不等于任何其它的值
* 当使用数学式或其他比较方法 `< > <= >=` 时，`null/undefined` 会被转化为数字，`null` 被转化为 `0`，`undefined` 被转化为 `NaN`
* `NaN` 不和任何值相等，包括他本身

```js
console.log(3 != '3'); // false

console.log('hello' === 'hello'); // true
console.log('2' === 2); // false

// null 和 undefined 在普通想等下比较时是相等的, 但是不与其它任何值普通相等
console.log(null == undefined); // true
console.log(null == 0); // false

// NaN 不和任何值相等，包括他本身
console.log(NaN == NaN); // false
console.log(NaN === NaN); // false
```



## 6. 逻辑运算符

逻辑运算符常用于布尔（逻辑）值之间; 当操作数都是布尔值时，返回值也是布尔

`&&` 和 `||` 返回的是一个特定的操作数的值，所以当它用于非布尔值的时候，返回值就可能是非布尔值

> **Tips：**与运算 `&&` 在或运算 `||` 之前进行，与运算 `&&` 的优先级比或运算 `||` 要高

* 或 `||`
* 与 `&&`
* 非 `!`



### 6-1 `||` 或运算符

两个竖线符号表示“或”运算符，逻辑或仅能够操作布尔值

* 如果参与运算的任意一个参数为 `true`，返回的结果就为 `true`，否则返回 `false`
* 如果操作数不是布尔值，那么它将会被转化为布尔值来参与运算（返回的值是操作数的初始形式，不会做布尔转换）
  * 处理每一个操作数时，都将其转化为布尔值。如果结果是 `true`，就停止计算，返回这个操作数的初始值
  * 如果所有的操作数都被计算过（也就是，转换结果都是 `false`），则返回最后一个操作数

```js
console.log(true || false); // true
console.log(2 > 1 || 4 < 5); // true

console.log(5 || 0); // 5
console.log(null || 'a' || 12); // 'a'
// null 转换为 false; 'a' 转换为true 返回第一个真值

// 当所有的值都为false是，则返回最后一个值
console.log(null || 0 || undefined); // undefined
```



**`||` 或运算符的短路运算**

或运算符 `||` 在遇到 `true` 时会立即停止运算，返回第一个布尔转换为 `true` 的操作数的初始值

`||` 对其参数进行处理，直到达到第一个真值，然后立即返回该值，而无需处理其他参数

```js
let a = 1; b = 2; c = 3;
console.log(a || b || c); // 1
```



### 6-2 `&&` 与运算符

两个 & 符号表示 `&&` 与运算符，逻辑或仅能够操作布尔值

* 当两个操作数都是真值时，与运算返回 `true`，否则返回 `false`

* 与运算的操作数可以是任意类型的值
  * 在处理每一个操作数时，都将其转化为布尔值。如果结果是 `false`，就停止计算，并返回这个操作数的初始值
  * 如果所有的操作数都被计算过（例如都是真值），则返回最后一个操作数

```js
console.log(true && false); // false
console.log(2 > 1 && 4 < 5); // true

console.log(5 && 0); // 0
console.log(null && 'a' && 12); // null
// null 转换为 false 返回第一个假值

// 当所有的值都为true是，则返回最后一个值
console.log(true && 1 && 'jsx'); // 'jsx'
```



**`&&` 与运算符的短路运算**

与运算符 `&&` 在遇到 `false` 时会立即停止运算，返回第一个布尔转换为 `false` 的操作数的初始值

`&&` 对其参数进行处理，直到达到第一个假值，然后立即返回该值，而无需处理其他参数

```js
let a = 1; b = 2; c = 3;
console.log(a || b || c); // 1
```



### 6-3 `!` 非运算符

感叹符号 `!` 表示布尔非运算符

* 将操作数转化为布尔类型：`true/false`
* 返回相反的值

```js
let bool = true;
console.log(!bool); // false
```

> **Tips：**非运算符 `!` 的优先级在所有逻辑运算符里面最高，所以它总是在 `&&` 和 `||` 之前执行



两个非运算 `!!` 有时候用来将某个值转化为布尔类型：

第一个非运算将该值转化为布尔类型并取反，第二个非运算再次取反

```js
let str = 'hello';
console.log(!!str); // false
```



## 7. 赋值运算符

赋值运算符用来把数据赋值给变量

| 运算符 | 描述               | 例子   | 等同于    |
| :----- | ------------------ | :----- | :-------- |
| =      | 直接赋值           | x = y  | x = y     |
| +=     | 加一个数后面再赋值 | x += y | x = x + y |
| -=     | 减一个数后面再赋值 | x -= y | x = x - y |
| *=     | 乘后再赋值         | x *= y | x = x * y |
| /=     | 除后再赋值         | x /= y | x = x / y |
| %=     | 取模后再赋值       | x %= y | x = x % y |

```js
// 直接赋值
let a = 1;

// 加一个数后面再赋值
console.log(a += 3); // a = a + 3 = 4

// 减一个数后面再赋值
console.log(a -= 2); // a = a - 2 = 2

// 乘后再赋值
console.log(a *= 3); // a = a * 3 = 6

// 除后再赋值
console.log(a /= 2); // a = a * 2 = 3

// 取模后再赋值
console.log(a %= 2); // a = a % 2 = 1
```



## 8. 位运算符

位运算符把运算元当做 32 位整数，并在它们的二进制表现形式上操作

位运算符将它的操作数视为32位元的二进制串（0和1组成）而非十进制八进制或十六进制数

- 按位与 ( `&` )
- 按位或 ( `|` )
- 按位异或 ( `^` )
- 按位非 ( `~` )
- 左移 ( `<<` )
- 右移 ( `>>` )
- 无符号右移 ( `>>>` )

| 运算符名称 | 运算符  | 描述                                                         |
| :--------- | :------ | :----------------------------------------------------------- |
| 按位与     | a & b   | 在a，b的位表示中，每一个对应的位都为1则返回1， 否则返回0     |
| 按位或     | a \| b  | 在a，b的位表示中，每一个对应的位，只要有一个为1则返回1， 否则返回0 |
| 按位异或   | a ^ b   | 在a，b的位表示中，每一个对应的位，两个不相同则返回1，相同则返回0 |
| 按位非     | ~ a     | 反转被操作数的位                                             |
| 左移       | a << b  | 将 a 的二进制串向左移动b位,右边移入0                         |
| 算术右移   | a >> b  | 把 a 的二进制表示向右移动 b 位，丢弃被移出的所有位（译注：算术右移左边空出的位是根据最高位是0和1来进行填充的） |
| 无符号右移 | a >>> b | 把 a 的二进制表示向右移动 b 位，丢弃被移出的所有位，并把左边空出的位都填充为0 |

| 操作    | 结果 | 等同于       | 结果 |
| :------ | :--- | :----------- | :--- |
| 5 & 1   | 1    | 0101 & 0001  | 0001 |
| 5 \| 1  | 5    | 0101 \| 0001 | 0101 |
| 5 ^ 1   | 4    | 0101 ^ 0001  | 0100 |
| ~ 5     | 10   | ~0101        | 1010 |
| 5 << 1  | 10   | 0101 << 1    | 1010 |
| 5 >> 1  | 2    | 0101 >> 1    | 0010 |
| 5 >>> 1 | 2    | 0101 >>> 1   | 0010 |

```js
// 位运算符把运算元当做 32 位整数，并在它们的二进制表现形式上操作

// & 位运算符：如果位数都是1则返回 1,否则返回0
console.log(5 & 1); // 0101 & 0001   0001 结果为1

// | 位运算符：只要有一个为1则返回1,否则返回0
console.log(5 | 1); // 0101 | 0001  0101 结果为5

// ^ 位运算符：如果数位是不同的则返回1,否则返回0
console.log(5 ^ 1); // 0101 ^ 0001  0100 结果为4

// ~ 位运算符：反转被操作数的位
console.log(~5); // ~0000 0101 1111 1010  结果为-6

// >> 位运算符：把 5 的二进制表示向右移动 1 位，丢弃被移出的所有位
console.log(5 >> 1); // 0101 >> 1  0010  结果为2

// << 位运算符：将 5 的二进制串向左移动b位,右边移入0
console.log(5 << 1); // 0101 << 1  1010 结果为10

// >>> 位运算符：把 5 的二进制表示向右移动 1 位，丢弃被移出的所有位，并把左边空出的位都填充为0
console.log(5 >>> 1); // 0101 >>> 1  0010 结果为2
```



## 8. 运算符优先级

运算符的执行顺序称为运算符的优先级，优先级高的运算符先于优先级低的运算符执行运算（数字越大，越先执行）

运算符的优先级可以通过使用圆括号来改变

```js
3 + 5 * 6 = 33
(3 + 5) * 6 = 48
```

对于相同优先级的运算符的执行顺序，则由运算符的结合性来决定。运算符的结合性包括「从右至左」和「从左至右」两种：

- 从右至左的结合性指的是，运算的执行是按从右到左的顺序进行
- 从左至右的结合性刚好相反，运算符的执行顺序按照从左到右的顺序进行

| 优先级 | 运算符类型         | 结合性        | 运算符         |
| ------ | ------------------ | ------------- | -------------- |
| 21     | 圆括号             | n/a（不相关） | ( … )          |
| 20     | 成员访问           | 从左到右      | … . …          |
| 20     | 需计算的成员访问   | 从左到右      | … [ … ]        |
| 20     | new（带参数列表）  | n/a           | new … ( … )    |
| 20     | 函数调用           | 从左到右      | … ( … )        |
| 20     | 可选链             | 从左到右      | ?.             |
| 19     | new（无参数列表）  | 从右到左      | new …          |
| 18     | 后置递增           | n/a           | … ++           |
| 18     | 后置递减           | n/a           | … --           |
| 17     | 逻辑非 (!)         | 从右到左      | ! …            |
| 17     | 按位非 (~)         | 从右到左      | ~ …            |
| 17     | 一元加法 (+)       | 从右到左      | \+ …           |
| 17     | 一元减法 (-)       | 从右到左      | \- …           |
| 17     | 前置递增           | 从右到左      | ++ …           |
| 17     | 前置递减           | 从右到左      | -- …           |
| 17     | typeof             | 从右到左      | typeof …       |
| 17     | void               | 从右到左      | void …         |
| 17     | delete             | 从右到左      | delete …       |
| 17     | await              | 从右到左      | await …        |
| 16     | 幂 (**)            | 从右到左      | … ** …         |
| 15     | 乘法 (*)           | 从左到右      | … * …          |
| 15     | 除法 (/)           | 从左到右      | … / …          |
| 15     | 取余 (%)           | 从左到右      | … % …          |
| 14     | 加法 (+)           | 从左到右      | … + …          |
| 14     | 减法 (-)           | 从左到右      | … - …          |
| 13     | 按位左移 (<<)      | 从左到右      | … << …         |
| 13     | 按位右移 (>>)      | 从左到右      | … >> …         |
| 13     | 无符号右移 (>>>)   | 从左到右      | … >>> …        |
| 12     | 小于 (<)           | 从左到右      | … < …          |
| 12     | 小于等于 (<=)      | 从左到右      | … <= …         |
| 12     | 大于 (>)           | 从左到右      | … > …          |
| 12     | 大于等于 (>=)      | 从左到右      | … >= …         |
| 12     | in                 | 从左到右      | … in …         |
| 12     | instanceof         | 从左到右      | … instanceof … |
| 11     | 相等 (==)          | 从左到右      | … == …         |
| 11     | 不相等 (!=)        | 从左到右      | … != …         |
| 11     | 全等 (===)         | 从左到右      | … === …        |
| 11     | 不全等 (!==)       | 从左到右      | … !== …        |
| 10     | 按位与 (&)         | 从左到右      | … & …          |
| 9      | 按位异或 (^)       | 从左到右      | … ^ …          |
| 8      | 按位或 (\|)        | 从左到右      | … \| …         |
| 7      | 逻辑与 (&&)        | 从左到右      | … && …         |
| 6      | 逻辑或 (\|\|)      | 从左到右      | … \|\| …       |
| 5      | 空值合并 (??)      | 从左到右      | … ?? …         |
| 4      | 条件（三元）运算符 | 从右到左      | … ? … : …      |
| 3      | 赋值               | 从右到左      | … = …          |
| 3      | 赋值               | 从右到左      | … += …         |
| 3      | 赋值               | 从右到左      | … -= …         |
| 3      | 赋值               | 从右到左      | … **= …        |
| 3      | 赋值               | 从右到左      | … *= …         |
| 3      | 赋值               | 从右到左      | … /= …         |
| 3      | 赋值               | 从右到左      | … %= …         |
| 3      | 赋值               | 从右到左      | … <<= …        |
| 3      | 赋值               | 从右到左      | … >>= …        |
| 3      | 赋值               | 从右到左      | … >>>= …       |
| 3      | 赋值               | 从右到左      | … &= …         |
| 3      | 赋值               | 从右到左      | … ^= …         |
| 3      | 赋值               | 从右到左      | … \|= …        |
| 3      | 赋值               | 从右到左      | … &&= …        |
| 3      | 赋值               | 从右到左      | … \|\|= …      |
| 3      | 赋值               | 从右到左      | … ??= …        |
| 2      | yield              | 从右到左      | yield …        |
| 2      | yield*             | 从右到左      | yield* …       |
| 1      | 逗号 / 序列        | 从左到右      | … , …          |

