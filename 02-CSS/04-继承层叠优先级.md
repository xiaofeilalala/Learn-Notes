# 继承层叠优先级

在使用CSS选择器的时候要注意CSS的三大属性：继承性和层叠性和优先级属性。

* 继承性。有一些属性给祖先元素，所有的后代元素都集成上了。关于文字样式的（color、font-、text-、line-），都能够继承； 所有关于盒子的、定位的、布局的属性都不能继承

* 层叠性。层叠性是一种能力，就是处理冲突的能力。当应用两条同级别的规则到一个元素的时候，写在后面的就是实际使用的规则

* 优先级。浏览器是根据优先级来决定当多个规则有不同选择器对应相同的元素的时候需要使用哪个规则



## 1. 继承性

继承也需要在上下文中去理解 —— 一些设置在父元素上的css属性是可以被子元素继承的，有些则不能（所有关于盒子的、定位的、布局的属性都不能继承）

```css
<div class="box">
    <h1>继承性</h1>
    <p>继承性</p>
    <span>继承性</span>
    <span>继承性</span>
    <ul>
        <li>继承性</li>
        <li>继承性</li>
        <li>继承性</li>
    </ul>
</div>

/* 定位 布局 盒子属性都不会被继承 */
.box {
    position: absolute;
    display: block;
    border: 2px solid #db5b34;
    color: #db5b34;
    padding: 10px;
    margin: 10px;
}
```

![](https://raw.githubusercontent.com/xiaofeilalala/DocsPics/main/imgs/20211110233839.png)

## 2. 层叠性

当应用两条同级别的规则到一个元素的时候，写在后面的就是实际使用的规则

当优先级相同的情况下设置相同的css属性后面的css属性会覆盖掉前面的属性

```css
/* 后面设置的样式会层叠掉前面设置的样式 */
h1 {
    color: #da2a39;
}

h1 {
    color: #daab2a;
}
        
<!-- 层叠性 当优先级相同的情况下设置相同的css属性后面的css属性会覆盖掉前面的属性 -->
<h1>层叠性</h1>
```

![](https://raw.githubusercontent.com/xiaofeilalala/DocsPics/main/imgs/20211110234818.png)

## 3. 优先级

> **Tips：**伪元素选择器实际是匹配伪元素，设置的是伪元素的样式不是元素本身的样式，在优先级中不用于其选择器比较权重

1. 元素父元素样式的优先级比祖先元素样式的优先级高（就近原则）

2. 行内样式比父元素样式以及`<style>` 标签定义的样式 和`<link>` 标签， @import 外部引用的样式 优先级高

3. 优先级关系：

   ```txt
   !important > 内联样式 > ID 选择器 > 类选择器 = 属性选择器 = 伪类选择器 > 标签选择器 = 伪元素选择器 > *通用选择器
   ```

4. 计算选择符中 ID 选择器的个数（a），计算选择符中类选择器、属性选择器以及伪类选择器的个数之和（b），计算选择符中标签选择器和伪元素选择器的个数之和（c）。按 a、b、c 的顺序依次比较大小，大的则优先级高，相等则比较下一个。若最后两个的选择符中 a、b、c 都相等，则按照"就近原则"来判断

5. 属性后插有 **!important** 的属性拥有最高优先级。若同时插有 **!important**，则再利用规则 3、4 判断优先级



### 3-1 权重值

一个选择器的优先级可以说是由四个部分相加 (分量)，可以认为是个十百千 — 四位数的四个位数：

- 内联样式表的权值最高 1000
-  ID 选择器的权值为 100
-  Class 类选择器，属性选择器或者伪类的权值为 10
- 元素、伪元素选择器的权值为 1



### 3-2 优先级规则

- 选择器都有一个权值，权值越大越优先
- 当权值相等时，后出现的样式表设置要优于先出现的样式表设置
- 创作者的规则高于浏览者：即网页编写者设置的CSS 样式的优先权高于浏览器所设置的样式
- 继承的CSS 样式不如后来指定的CSS 样式
- 在同一组属性设置中标有 !important 规则的优先级最大



```css
* {
    color: #1abc9c;
}

.class {
    color: #3498db;
}

#id {
    color: #9b59b6;
}

div[class="class"] {
    color: #f1c40f;
}

div:first-child {
    color: #e67e22;
}

div {
    color: #e74c3c;
}

div::first-letter {
    content: "";
    color: #6210e6;
}

<div class="class" id="id" style="color: #2ecc71;">优先级选择器</div>
/* 此时字体颜色为#2ecc71 */
```



### 4. !important

CSS 中的 !important 规则用于增加样式的权重

**!important** 与优先级无关，但它与最终的结果直接相关，使用一个 !important 规则时，此声明将覆盖任何其他声明

当两条相互冲突的带有 !important 规则的声明被应用到相同的元素上时，拥有更大优先级的声明将会被采用

- **一定**要优先考虑使用样式规则的优先级来解决问题而不是 `!important`
- **只有**在需要覆盖全站或外部 CSS 的特定页面中使用 `!important`
- **永远不要**在你的插件中使用 `!important`
- **永远不要**在全站范围的 CSS 代码中使用 `!important`

![](https://raw.githubusercontent.com/xiaofeilalala/DocsPics/main/imgs/20211111171805.png)
